<!doctype html>
<html lang="zxx" xmlns:th="http://www.thymeleaf.org">
<head th:replace="common/head :: common_header(~{::title},~{::links},~{})">
    <title>sign-in</title>
</head>


    <body>
    <div id="app">
        <!--引入navbar-->
        <div th:include="common/navbar :: navbar"></div>

        <!-- Start Page Title Area -->
        <div class="page-title-area item-bg-1">
            <div class="d-table">
                <div class="d-table-cell">
                    <div class="container">
                        <div class="page-title-content">
                            <h2>登 录</h2>
                            <ul>
                                <li><a th:href="@{/index.html}" href="index.html">首 页</a></li>
                                <li>登 录</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Page Title Area -->

        <!-- Start Sign In Area -->
        <div class="sign-in-area ptb-100">
            <div class="container">
                <div class="sign-in-form">
                    <div class="sign-in-title">
                        <h3>欢迎回来!</h3>
                        <p>请登录您的账号</p>
                    </div>

                    <form onsubmit="return check()">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="form-group">
                                    <input id="cNo" name="cNo" type="text" class="form-control" placeholder="请输入企业统一编号">
                                </div>
                            </div>

                            <div class="col-lg-12">
                                <div class="form-group">
                                    <input id="password" name="password" type="password" class="form-control" placeholder="请输入您的密码">
                                </div>
                            </div>

                            <div class="col-lg-12">
                                <div class="form-group">
                                    <span id="checkSpan" style="color: #ff0000"></span>
                                </div>
                            </div>

                            <div class="col-lg-12">
                                <div class="form-check">
                                    <input name="remember-me" type="checkbox" class="form-check-input" id="remember">
                                    <label class="form-check-label" for="remember">记住密码</label>
                                </div>
                            </div>

                            <div class="col-lg-12 text-right">
                                <p class="forgot-password"><a th:href="@{/}" href="#">忘记密码?</a></p>
                            </div>

                            <div class="col-lg-12">
                                <div class="send-btn">
                                    <button type="submit" class="default-btn">
                                        立即登录
                                    </button>
                                </div>
                                <br>
                                <span>还没有账号? <a th:href="@{/signUp}" href="sign-up.html">立即注册!</a></span>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- End Sign In Area -->

        <!-- Start Footer Area -->
        <section class="footer-area pt-100 pb-70">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 col-md-6">
                        <div class="single-footer-widget">
                            <div class="logo">
                                <a href="#">
                                    <img th:src="@{/assets/img/logo2.png}" src="assets/img/logo2.png" alt="image">
                                </a>
                            </div>
                            <p>平安袋是银行为客户提供的个人无担保、无抵押的信用贷款，额度为1万-50万，用于个人或家庭除购买住房以外其他消费或经营用途。手续齐全，1-3个工作日即可放款。</p>
                            <ul class="social">
                                <li>
                                    <b>跟随我们:</b>
                                </li>

                                <li>
                                    <a href="#" target="_blank">
                                        <i class="flaticon-twitter"></i>
                                    </a>
                                </li>

                                <li>
                                    <a href="#" target="_blank">
                                        <i class="flaticon-instagram"></i>
                                    </a>
                                </li>

                                <li>
                                    <a href="#" target="_blank">
                                        <i class="flaticon-facebook"></i>
                                    </a>
                                </li>

                                <li>
                                    <a href="#" target="_blank">
                                        <i class="flaticon-linkedin"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-6">
                        <div class="single-footer-widget">
                            <h3>快速链接</h3>

                            <ul class="quick-links">
                                <li>
                                    <a href="about.html">关于</a>
                                </li>
                                <li>
                                    <a href="#">我们的表现</a>
                                </li>
                                <li>
                                    <a href="faq.html">常见问题</a>
                                </li>
                                <li>
                                    <a href="news.html">博客</a>
                                </li>
                                <li>
                                    <a th:href="@{/contact}">联系我们</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-6">
                        <div class="single-footer-widget">
                            <h3>其他资源</h3>

                            <ul class="quick-links">
                                <li>
                                    <a href="#">支持</a>
                                </li>
                                <li>
                                    <a href="privacy-policy.html">隐私政策</a>
                                </li>
                                <li>
                                    <a href="terms-condition.html">服务条款</a>
                                </li>
                                <li>
                                    <a href="#">商业贷款</a>
                                </li>
                                <li>
                                    <a href="#">贷款服务</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-6">
                        <div class="single-footer-widget">
                            <h3>联系我们</h3>

                            <div class="info-contact">
                                <i class="flaticon-pin"></i>
                                <span>6890 Blvd, The Bronx, NY 1058 New York, USA</span>
                            </div>

                            <div class="info-contact">
                                <i class="flaticon-mail"></i>
                                <span>
                                <a href="mailto:hello@finix.com">hello@finix.com</a>
                            </span>
                                <span>
                                <a href="#">Skype: example</a>
                            </span>
                            </div>

                            <div class="info-contact">
                                <i class="flaticon-telephone"></i>
                                <span>
                                <a href="tel:1514312-6688">+1 (514) 312-5678</a>
                            </span>
                                <span>
                                <a href="tel:1514312-6688">+1 (514) 312-6688</a>
                            </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- End Footer Area -->

        <!-- Start Copy Right Area -->
        <div class="copy-right-area">
            <div class="container">
                <div class="copy-right-content">
                    <p>
                        &copy;版权和副本:2022苍盐海 版权所有.
                    </p>
                </div>
            </div>
        </div>
        <!-- End Copy Right Area -->

        <!-- Start Go Top Area -->
        <div class="go-top">
            <i class='bx bx-chevron-up'></i>
        </div>
        <!-- End Go Top Area -->

        <!--弹框start-->
        <div class="modal fade" id="MyModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
             data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="myModalLabel">提示</h4>
                        <!--<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>-->
                    </div>
                    <div class="modal-body">
                        <p id="ModalContext">内容</p>
                    </div>
                    <div class="modal-footer">
                        <button onclick="location.href=('/details')" type="button" class="btn btn-primary">确定</button>
                    </div>
                </div>
            </div>
        </div>
         <!--弹框end-->

        <!-- Jquery Slim JS -->
        <script th:src="@{/assets/js/jquery.min.js}" src="assets/js/jquery.min.js"></script>
        <!-- Popper JS -->
        <script th:src="@{/assets/js/popper.min.js}" src="assets/js/popper.min.js"></script>
        <!-- Bootstrap JS -->
        <script th:src="@{/assets/js/bootstrap.min.js}" src="assets/js/bootstrap.min.js"></script>
        <!-- Meanmenu JS -->
        <script th:src="@{/assets/js/jquery.meanmenu.js}" src="assets/js/jquery.meanmenu.js"></script>
        <!-- Carousel JS -->
        <script th:src="@{/assets/js/owl.carousel.min.js}" src="assets/js/owl.carousel.min.js"></script>
        <!-- Nice Select JS -->
        <script th:src="@{/assets/js/jquery.nice-select.min.js}" src="assets/js/jquery.nice-select.min.js"></script>
        <!-- Magnific Popup JS -->
        <script th:src="@{/assets/js/jquery.magnific-popup.min.js}" src="assets/js/jquery.magnific-popup.min.js"></script>
        <!-- Odometer JS -->
        <script th:src="@{/assets/js/odometer.min.js}" src="assets/js/odometer.min.js"></script>
        <!-- Appear JS -->
        <script th:src="@{/assets/js/jquery.appear.js}" src="assets/js/jquery.appear.js"></script>
        <!-- Form Ajaxchimp JS -->
		<script th:src="@{/assets/js/jquery.ajaxchimp.min.js}" src="assets/js/jquery.ajaxchimp.min.js"></script>
		<!-- Form Validator JS -->
		<script th:src="@{/assets/js/form-validator.min.js}" src="assets/js/form-validator.min.js"></script>
		<!-- Contact JS -->
        <script th:src="@{/assets/js/contact-form-script.js}" src="assets/js/contact-form-script.js"></script>
        <!-- Wow JS -->
		<script th:src="@{/assets/js/wow.min.js}" src="assets/js/wow.min.js"></script>
        <!-- Custom JS -->
        <script th:src="@{/assets/js/main.js}" src="assets/js/main.js"></script>
        </div>
    </body>
</html>
<script>
    /*获取cookie*/
    let cookies = document.cookie.split(';');
    function getCookie(mkey) {
        for (let i = 0; i < cookies.length; i++) {
            let kv = cookies[i].split('=');
            if (kv[0].trim() == mkey) {
                console.log(kv[1].trim())
                return kv[1].trim();
            }
        }
        return '';
    }
    //获取cookie回显
    window.onload = function () {
        let userNumber = getCookie("userNumber");
        let password = getCookie("password");
        let remember = getCookie("remember");
        if (remember == 'on') {
            $("#cNo").val(userNumber);
            $("#password").val(password);
            $("#remember").prop("checked", true);
        }
    }
    /*提交登录*/
    function check(){
        let cNo = $("#cNo").val();
        let password =$("#password").val();
        let remember =$("#remember").val();
        if (cNo=="" || password==""){
            $("#checkSpan").html('企业编号和密码不能为空');
            return false;
        }
        $.ajax({
            url:"/company/login",
            type:'post',
            data:{
                "cNo":cNo,
                "password":password,
                "remember":remember
            },
            success:function (res) {
                if(res){
                    $("#checkSpan").html('登录成功');
                    //判断用户是否认证
                    checkAuthStatus()
                }else {
                    $("#checkSpan").html('企业编号或密码错误');
                }
            }
        })
        return false;
    }
    /*检查用户认证*/
    function checkAuthStatus() {
        $.ajax({
            url:'/company/checkAuthStatus',
            type:'get',
            success:function (res) {
                switch (res) {
                    case -2:
                        $("#checkSpan").html('用户未登录');
                        setTimeout(function() { location.reload(); }, 1000 );
                        break;
                    case 1:
                        setTimeout(function() { location.href="/" }, 1000 );
                        break;
                    case 2:
                        setTimeout(function() { location.href="/" }, 1000 );
                        break;
                    default:
                        $("#ModalContext").html('请完善身份信息');
                        $("#MyModal").modal('show')
                        /* setTimeout(function() { location.href="/details" }, 1000 );*/
                }
            }
        })
    }
</script>
